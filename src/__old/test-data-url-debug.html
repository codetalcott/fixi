<!DOCTYPE html>
<html>
<head>
    <title>Debug Data URL</title>
    <script src="fiximod-compat-standalone-fixed.js"></script>
</head>
<body>
    <h1>Debug Data URL Test</h1>
    <button fx-action="data:text/plain,foo" fx-swap="innerHTML">Test Button</button>
    
    <script>
        document.addEventListener('fx:config', (evt) => {
            console.log('Config:', evt.detail.cfg);
        });
        
        document.addEventListener('fx:before', (evt) => {
            console.log('Before:', evt.detail.cfg);
        });
        
        document.addEventListener('fx:after', (evt) => {
            console.log('After:', evt.detail.cfg);
            console.log('Response text:', evt.detail.cfg.text);
        });
        
        document.addEventListener('fx:swapped', (evt) => {
            console.log('Swapped:', evt.detail.cfg);
            console.log('Button innerHTML now:', document.querySelector('button').innerHTML);
        });
        
        document.addEventListener('fx:error', (evt) => {
            console.error('Error:', evt.detail);
        });
        
        // Click button after a short delay
        setTimeout(() => {
            console.log('Clicking button...');
            document.querySelector('button').click();
        }, 500);
    </script>
</body>
</html>