<!DOCTYPE html>
<html>
<head>
    <title>Debug Infinite Loop</title>
    <script>
        let processCount = 0;
        let observerCount = 0;
        
        // Intercept MutationObserver
        const OriginalMutationObserver = window.MutationObserver;
        window.MutationObserver = class extends OriginalMutationObserver {
            constructor(callback) {
                super((mutations, observer) => {
                    observerCount++;
                    console.log(`MutationObserver triggered ${observerCount} times, mutations:`, mutations.length);
                    mutations.forEach(m => {
                        console.log('Mutation type:', m.type, 'target:', m.target, 'added nodes:', m.addedNodes.length);
                    });
                    callback(mutations, observer);
                });
            }
        };
    </script>
    <script src="fiximod-compat-standalone-fixed.js"></script>
</head>
<body>
    <h1>Testing fx:inited trigger</h1>
    <div id="container"></div>
    
    <script>
        // Track fx:process events
        document.addEventListener('fx:process', (evt) => {
            processCount++;
            console.log(`fx:process ${processCount}:`, evt.target);
        });
        
        // Track all fx events
        ['fx:init', 'fx:inited', 'fx:config', 'fx:before', 'fx:after', 'fx:swapped'].forEach(eventName => {
            document.addEventListener(eventName, (evt) => {
                console.log(eventName, evt.target);
            });
        });
        
        // Add content after a delay
        setTimeout(() => {
            console.log('Adding content with fx:inited trigger...');
            document.getElementById('container').innerHTML = '<p fx-action="/test" fx-trigger="fx:inited">Test</p>';
        }, 1000);
    </script>
</body>
</html>